package ToxicBot;

use strict;
use warnings;
use utf8;
use base qw/BotBase/;
use experimental qw/signatures/;

#271058
my @whois_responses = (
  'Ð¢Ñ‹ Ð±Ð»ÑÑ‚ÑŒ ÑÐ°Ð¼ ÐºÑ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹?',
  'ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ…Ð¾Ð´ Ð»ÑƒÐ·ÐµÑ€Ð°',
  'ÐÑƒ Ð¸ Ð½Ð°Ñ…ÑƒÑ Ñ‚ÐµÐ±Ðµ ÑÑ‚Ð¾ Ð·Ð½Ð°Ñ‚ÑŒ?',
  'Ð¯ Ð±Ð¾Ñ‚, Ð°Ð»Ñ‘!',
  'Ð›ÑƒÑ‡ÑˆÐµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÑŒ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ, Ð° Ð½Ðµ Ð·Ð°ÑÐ¸Ñ€Ð°Ð¹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ñ‹',
  'Ð–Ð°Ð»ÑŒ',
  '@ÐºÑ‚Ð¾ ÑÑ‚Ð¾',
  'Ð¯ Ñ€ÑƒÑÑÐºÐ¸Ð¹!',
  'Ð›ÑŽÐ±Ð¾Ð²Ð½Ð¸Ðº Ñ‚Ð²Ð¾ÐµÐ¹ Ð¼Ð°Ð¼ÐºÐ¸',
);

#400974
my @toxic_responses = (
  'Ð­Ñ‚Ð° Ñ…ÐµÑ€Ð½Ñ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¸Ñ€Ð¾Ð½Ð¸Ð¸',
  'ÐÐµ Ð·Ð¾Ð²Ð¸ ÑÑ‚Ð¾ Ð³Ð¾Ð²Ð½Ð¾',
  'Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚ Ñ‚Ð¾ÐºÑÐ¸Ñ‡ÐµÐ½ Ñ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒÑŽ 99%. ÐžÑ‡ÐµÐ½ÑŒ Ñ‚Ð¾ÐºÑÐ¸Ñ‡Ð½Ð¾, Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ñ€Ð¸Ñ‚Ð¾Ñ€Ð¸ÐºÐ° Ð½ÐµÐ½Ð°Ð²Ð¸ÑÑ‚Ð¸!',
);

#308880
my @khalisi_responses = (
  'ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ…Ð¾Ð´ Ð»ÑƒÐ·ÐµÑ€Ð°',
  'ÐšÑ…ÑÐ¸ÑÐ¸ Ð‘Ð¾Ñ‚',
  'ÐšÑ…ÑƒÑÑÐ¸ Ð˜Ð´Ð¸',
);

my @reponses = (
  ['Ð”Ð¾Ñ…ÑƒÑ ÑƒÐ¼Ð½Ñ‹Ð¹?', 'ÐžÑ…ÑƒÐµÑ‚ÑŒ Ñ‚Ñ‹ ÑƒÐ¼Ð½Ñ‹Ð¹'],
  'Ð¢Ð¾ ÐµÑÑ‚ÑŒ?',
  ['ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑÑ, Ð¼Ñ€Ð°Ð·ÑŒ', 'ÐÐ°Ð¿Ð¾Ð¼Ð½Ð¸ ÐºÑ‚Ð¾ Ñ‚Ñ‹'],
  'ÐÐµ Ð¿Ð¸Ð·Ð´Ð¸',
  'ÐÐ²Ð° Ð³Ð¾Ð²Ð½Ð¾ (ÑÑƒÐ±ÑŠÐµÐºÑ‚Ð¸Ð²Ð½Ð¾)',
  ['Ð¢Ð²Ð¾Ñ Ð¼Ð°Ñ‚ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐ°Ñ Ð¶ÐµÐ½Ñ‰Ð¸Ð½Ð°', 'ÐÐ°ÑˆÐµÐ» Ñ‚Ð²Ð¾ÑŽ Ð¼Ð°Ð¼Ñƒ. Ð§Ñ‚Ð¾ Ñ Ð½ÐµÐ¹ Ð´ÐµÐ»Ð°Ñ‚ÑŒ???'],
  'Ð£Ñ… ÑÑƒÐºÐ° ÑÐ¾ ÑÐ¼Ñ‹ÑÐ»Ð¾Ð¼ (Ð½ÐµÑ‚)',
  'Ð¢Ñ‹ Ð±Ð»ÑÑ‚ÑŒ ÐºÑ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹?',
  'Ð§ÐµÐ¹ Ñ‚Ð²Ð¸Ð½Ðº Ð¸ Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ð¾Ð½ Ð½Ðµ Ð² Ð±Ð°Ð½Ðµ?',
  'Ð Ñ‚ÐµÐ¿ÐµÑ€ÑŒ ÑÐ°Ð¼ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð¹ Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»',
  'ÐÑƒ Ð¸ Ð³Ð¾Ð²Ð½Ð¾ Ð¶Ðµ Ñƒ Ñ‚ÐµÐ±Ñ Ð² Ð³Ð¾Ð»Ð¾Ð²Ðµ',
  'Ð’ÑÐµ Ð±Ñ‹Ð»Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ð¿Ð¾ÐºÐ° Ñ‚Ñ‹ Ð½Ðµ Ð½Ð°Ñ‡Ð°Ð» ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ‚ÑŒ',
  ['ÐŸÐ¸Ð·Ð´ÐµÑ†. ÐŸÐ¸ÑˆÐµÑˆÑŒ ÑÐ»Ð¾Ð²Ð½Ð¾ Ñ‚ÐµÐ±Ðµ 7 Ð»ÐµÑ‚', 'ÐŸÐ¸ÑˆÐµÑˆÑŒ ÑÐ»Ð¾Ð²Ð½Ð¾ Ñ‚ÐµÐ±Ðµ 7 Ð»ÐµÑ‚'],
  'ÐŸÐ¸Ð·Ð´ÐµÑ† Ð¸ ÐºÑ‚Ð¾-Ñ‚Ð¾ Ð¶Ðµ Ð¿Ð¾Ð´Ð¾Ð±Ð½Ð¾Ðµ Ð»Ð°Ð¹ÐºÐ°ÐµÑ‚',
  'Ð¢Ñ‹ Ð¾Ð¿ÑÑ‚ÑŒ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸ÑˆÑŒ Ð½Ð° ÑÐ²ÑÐ·ÑŒ?',
  'Ð¢Ñ‹ ÐºÑƒÐ´Ð° Ð·Ð²Ð¾Ð½Ð¸ÑˆÑŒ?',
  ['Ð­Ñ‚Ð¾ Ð²ÑÐµ Ñ‡Ñ‚Ð¾ ÑÐ¼Ð¾Ð³Ð»Ð¸ Ñ€Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ‚Ð²Ð¾Ð¸ Ð´Ð²Ð° Ñ Ð¿Ð¾Ð»Ð¾Ð²Ð¸Ð½Ð¾Ð¹ Ð½ÐµÐ¹Ñ€Ð¾Ð½Ð°?', 'Ð­Ñ‚Ð¾ Ð²ÑÐµ Ñ‡Ñ‚Ð¾ ÑÐ¼Ð¾Ð³Ð»Ð¸ Ñ€Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ‚Ð²Ð¾Ð¸ Ñ‚Ñ€Ð¸ Ð¸Ð·Ð²Ð¸Ð»Ð¸Ð½Ñ‹?'],
  'Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð½ÑƒÐ¶Ð½Ð¾ Ñ‚Ð²Ð¾Ð¸Ñ… ÐºÐ¾Ð¿Ð¸Ð¹ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð²Ð½ÑÑ‚Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚?',
  'Ð•ÑÐ»Ð¸ Ñ‚Ñ‹ Ñ‚Ð°ÐºÐ¾Ð¹ ÑƒÐ¼Ð½Ñ‹Ð¹, Ñ‚Ð¾ Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð²ÑÐµ ÐµÑ‰Ðµ Ð½Ð° Ð¢Ð–?',
  'Ð›ÑƒÑ‡ÑˆÐµ Ð±Ñ‹ Ñ‚Ñ‹ Ñ Ð¼ÑƒÐ¶Ð¸ÐºÐ¾Ð¼ Ð¿Ð¾ÐµÐ±Ð°Ð»ÑÑ, Ð° Ð½Ðµ Ð²Ð¾Ñ‚ ÑÑ‚Ð¾ Ð²ÑÐµ',
  'Ð˜Ð´Ð¸ Ð² Ñ…ÑƒÐ¹',
  'ÐžÑ…ÑƒÐµÑ‚ÑŒ. Ð§Ñ‚Ð¾ Ð±Ñ‹ Ð¼Ñ‹ Ð±ÐµÐ· Ñ‚ÐµÐ±Ñ Ð´ÐµÐ»Ð°Ð»Ð¸',
  'Ð¢Ð²Ð¾Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ ÑÑ‚Ð¾ Ð¿Ñ€Ð°Ð½Ðº Ð²Ñ‹ÑˆÐµÐ´ÑˆÐ¸Ð¹ Ð¸Ð· Ð¿Ð¾Ð´ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ',
  'ÐÑƒ Ð¸ Ð³Ð´Ðµ Ñ‚Ð°Ðº ÑƒÑ‡Ð°Ñ‚ Ð¼Ñ‹ÑÐ»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶Ð°Ñ‚ÑŒ?',
  'Ð¢Ñ‹ Ð³ÐµÐ¹?',
  'ÐÐµ Ñ€Ð²Ð¸ÑÑŒ',
  'ÐÐ°Ñ‡Ð°Ð»Ð¾ÑÑŒ. Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð¾Ð¿ÑÑ‚ÑŒ Ð´ÑƒÑˆÐ½Ð¸Ñ‚ÑŒ Ð±ÑƒÐ´ÐµÑˆÑŒ?',
  'Ð¡Ð°Ð¼ Ñ‡Ð¸Ñ‚Ð°Ð¹ ÑÐ²Ð¾Ð¹ Ð²Ñ‹ÑÐµÑ€',
  'Ð’Ð»ÐµÐ¿Ð¸Ð» Ð±Ñ‹ Ð´Ð¸Ð· Ñ‚ÐµÐ±Ðµ, Ð½Ð¾ Ñ Ð¿Ñ‚Ð¸Ñ‡ÐºÐ°, Ð¼Ð½Ðµ ÑÑ‚Ð¾ ÑÐ»Ð¾Ð¶Ð½Ð¾',
  'Ð¢ÐµÐ±Ðµ Ð½Ðµ ÑÑ‚Ñ‹Ð´Ð½Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ ÑÐ°Ð¹Ñ‚Ðµ Ñ Ð—Ð¾Ð¸Ð±Ð°Ð½Ð¾Ð¹(âœ“) ?',
  'Ð”ÐµÐ´, Ð¿ÐµÐ¹ Ñ‚Ð°Ð±Ð»ÐµÑ‚ÐºÐ¸, Ð° Ñ‚Ð¾ Ð¿Ð¾ Ð¶Ð¾Ð¿Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸ÑˆÑŒ',
  'Ð”Ð°Ð¼ Ñ‚ÐµÐ±Ðµ Ð¿Ð¸Ð·Ð´Ñ‹ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ ÑÑ…Ð¾Ð´ÐºÐµ',
  'ÐžÑ‚ Ñ‚Ð²Ð¾ÐµÐ³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ ÑÐºÐ²Ð¾Ð·Ð¸Ñ‚ Ñ„ÐµÐ¼Ð¸Ð½Ð¸Ð·Ð¼Ð¾Ð¼',
  'Ð¯ Ñ Ñ‚Ð¾Ð±Ð¾Ð¹ Ð½Ðµ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÑŽ',
  ['ÐÐµ ÑÐ¼ÐµÑˆÐ½Ð¾', 'Ð­Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ ÑÐ¼ÐµÑˆÐ½Ð¾', 'Ð¡Ð¼ÐµÑˆÐ½Ð¾ (Ð½ÐµÑ‚)', 'ÐÑ…Ð°Ñ…Ð°Ñ…, ÑÑ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ ÑÐ¼ÐµÑˆÐ½Ð¾ (Ð½ÐµÑ‚)'],
  'Ð Ð¾Ñ‚ Ð·Ð°ÐºÑ€Ð¾Ð¹',
  'ÐšÐ°Ðº Ð¶Ðµ Ð´ÐµÐ³Ñ€Ð°Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¢Ð–',
  'ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ€ÑƒÑÑÐºÐ¸Ðµ Ñ‚ÐµÑ€Ð¿ÑÑ‚???',
  'Ð§ÐµÐ¹ ÐšÑ€Ñ‹Ð¼?',
  'ÐšÐ°Ðº Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾: Ð½Ð° Ð£ÐºÑ€Ð°Ð¸Ð½Ñƒ Ð¸Ð»Ð¸ Ð² Ð£ÐºÑ€Ð°Ð¸Ð½Ñƒ?',
  '( Í¡Â° ÍœÊ– Í¡Â°)',
  'Ð¢ÐµÐ±Ñ Ð·Ð°Ð±Ñ‹Ð»Ð¸ ÑÐ¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ',
  'Ð¢Ñ‹ Ð±Ñ€ÐµÐ´Ð¸ÑˆÑŒ?',
  'Ð­Ñ‚Ð¾ ÑÐ°Ð¼Ð¾Ðµ Ñ‚ÑƒÐ¿Ð¾Ðµ Ñ‡Ñ‚Ð¾ Ñ Ñ‡Ð¸Ñ‚Ð°Ð» ÑÐµÐ³Ð¾Ð´Ð½Ñ',
  'ÐšÐ°ÐºÐ°Ñ Ñ‚ÑƒÐ¿Ð¾ÑÑ‚ÑŒ',
  ['Ð—Ð°ÑˆÐµÐ¹ÑÑ', 'Ð—Ð°ÑˆÐµÐ¹ÑÑ Ð¸ Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð¿Ð¸ÑˆÐ¸'],
  'ÐžÐ¹, Ð²ÑÐµ',
  'Ð¢Ñ‹ Ñ€ÑƒÑÑÐºÐ¸Ð¹?',
  'Ð¢ÐµÐ±Ðµ ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð»ÐµÑ‚?',
  'ÐšÐ°Ðº Ð¶Ðµ Ñ‚Ñ‹ ÑÐ»Ð°Ð± Ð² Ð¿Ð¾ÑÑ‚Ð¸Ñ€Ð¾Ð½Ð¸Ð¸',
  'Ð­Ñ‚Ð¾ Ñ‚ÐµÐ±Ñ ÐµÐ±Ð°Ñ‚ÑŒ Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾',
  'Ð—Ð°ÐºÑ€Ð¾Ð¹ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Ñ ÑÐ°Ð¹Ñ‚Ð¾Ð¼ Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ!',
  'Ð¢Ñ‹ ÐµÐ²Ñ€ÐµÐ¹?',
  ['ðŸ¤¡','ðŸ¤¡ðŸ¤¡ðŸ¤¡'],
  '[@308880|ÐšÑ…Ð°Ð»Ð¸ÑÐ¸ Ð‘Ð¾Ñ‚]',
  'ÐžÐ¿ÑÑ‚ÑŒ Ñ‚Ñ‹ Ð²Ð»ÐµÐ· ÑÐ²Ð¾ÐµÐ¹ Ð¶Ð¾Ð¿Ð¾Ð¹ Ð½Ðµ Ð¿Ð¾ Ð´ÐµÐ»Ñƒ',
  'Ð Ñ‚ÐµÐ±Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ Ð½Ð°Ð´Ð¾ Ð±Ñ‹Ð»Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ…ÑƒÐ¹Ð½ÑŽ?',
  'ÐÐµÑ‡ÐµÐ³Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ - Ð½Ðµ ÑÐ¿Ð°Ð¼ÑŒ',
  'Ð­Ñ‚Ð¾ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ð° Ð¸Ð½Ñ†ÐµÐ»ÑŒÑÐºÐ¾Ð¼?',
  'Ð›ÑƒÑ‡ÑˆÐµ Ð±Ñ‹ Ñƒ ÑƒÐ¼Ð½Ñ‹Ñ… Ð»ÑŽÐ´ÐµÐ¹ Ð¿Ð¾ÑƒÑ‡Ð¸Ð»ÑÑ: https://bit.ly/34pfKV6',
  'Ð’ÑÐµ, ÐºÑ‚Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑÐ°Ð¹Ñ‚Ðµ - Ð±Ð¾Ð¶Ð¸Ð¹ ÑÑ‚Ñ‹Ð´, ÑÑ€Ð°Ð¼Ð¾Ñ‚Ð° Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÑ‚Ð²Ð°, Ð²ÑÐµÐ»ÐµÐ½Ð½Ð¾Ð¹ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ‹Ð´Ð½Ð¾, Ð·Ð° Ñ‚Ð¾ Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ñ‚Ð°ÐºÐ¾Ðµ ÐºÐ°Ðº Ð¼Ñ‹',
  # 'Ð”Ð° Ñ‚Ñ‹ Ð¿ÐµÑ‚Ñ€Ð¾ÑÑÐ½ 80 ÑƒÑ€Ð¾Ð²Ð½Ñ! Ñ…Ð°-Ñ…Ð°-Ñ…Ð°, Ð¾Ð±Ð¾Ñ€Ð¶Ð°Ñ‚ÑŒÑÑ, Ð¥Ð Ð¥Ð Ð¥Ð, Ð¼Ð´Ð° ÑƒÐ¶',
);

sub handle_mention($self, $json) {
  my ($to, $creator) = $json->{reply_to}
    ? ($json->{reply_to}{id}, $json->{reply_to}{creator})
    : (undef, $json->{content}{creator});

  $to = $json->{id} if $creator && $creator->{id} eq '179385';
  $self->reply_from_list($json, $to, \@reponses);
}

sub handle_text_match($self, $json) {
  $self->handle_mention($json);
}

my %never_reply = map {$_ => 1} qw/271058 400974 308880/;
my %always_reply = map {$_ => 1} qw//;

sub handle_reply($self, $json) {
  my $text = $json->{text} // '';
  my $to = $json->{id};

  return $self->reply_from_list($json, $to, \@whois_responses)
    if $text =~ /\[\@271058\|/ || $text =~ /\@ÐºÑ‚Ð¾ +ÑÑ‚Ð¾\b/i;

  return $self->reply_from_list($json, $to, \@toxic_responses)
    if $text =~ /\[\@400974\|/ || $text =~ /\@Ñ‚Ð¾ÐºÑÐ¸Ñ‡Ð½Ñ‹Ð¹ +Ð±Ð¾Ñ‚\b/i;

  return $self->reply_from_list($json, $to, \@khalisi_responses)
    if $text =~ /\[\@308880\|/ || $text =~ /\@ÐºÑ…Ð°Ð»Ð¸ÑÐ¸ +Ð±Ð¾Ñ‚\b/i;

  my $cid = $json->{creator}{id} or return;
  return if $never_reply{$cid};
  return if (!$always_reply{$cid}) && (rand(100) > ($self->{reply_probability} || 10));
  $self->reply_from_list($json, $to, \@reponses);
}

1;
